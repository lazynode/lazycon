<html>
	<link href="lazycon.css" rel="stylesheet" />
	<body>
		<div id="container">
			<h1 id="title">lazycon - neocli</h1>
			<input id="cmd" autocomplete="on"/>
			<code id="hint"></code>
			<code id="result"></code>
		</div>
	</body>
	<script>
            document.getElementById("cmd").addEventListener("keypress", e => {
                try {
                    if (e.key !== "Enter") return;
                    const url = new URL(e.target.value);
                    if (url.protocol !== "n3:") throw 'protocol must be n3!';
                    const [_0, _1, sender, _3, scopes, scripthash, method] = url.pathname.match(new RegExp('^//(([a-zA-Z0-9]+)(:(.*))?@)?([a-zA-Z0-9]+)/([a-zA-Z0-9]+)$'));
                    document.getElementById("result").innerText = `invoke ${scripthash} ${method} ${JSON.stringify([...url.searchParams].map(([k, v]) => ({ type: k, value: v })))}` + (sender ? ` ${sender} ${sender}` : '');
                } catch (err) {
                    alert(JSON.stringify(err));
                }
    });
        </script>
</html>
